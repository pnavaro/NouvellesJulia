<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport content="width=device-width, initial-scale=1"> <link rel=stylesheet href="/NouvellesJulia/libs/katex/katex.min.css"> <link rel=stylesheet href="/NouvellesJulia/css/franklin.css"> <link rel=stylesheet href="/NouvellesJulia/css/hypertext.css"> <link rel=icon href="/NouvellesJulia/assets/favicon.png"> <title></title> <header> <h1><a href="/NouvellesJulia/">Nouvelles Julia</a></h1> <nav> <a href="/NouvellesJulia/" class=current >Home</a> | <a href="https://www.juliafran.org">JuliaFran</a> | <a href="https://github.com/pnavaro/NouvellesJulia">GitHub</a> <hr/> </nav> </header> <div class=franklin-content > <pre><code class="c hljs">++
<span class=hljs-meta >#<span class=hljs-meta-keyword >include</span> <span class=hljs-meta-string >&lt;RcppArmadillo.h&gt;</span></span>
<span class=hljs-keyword >using</span> <span class=hljs-keyword >namespace</span> Rcpp;

<span class=hljs-comment >// [[Rcpp::export]]</span>
<span class=hljs-function >Rcpp::NumericVector <span class=hljs-title >matvec</span><span class=hljs-params >( Rcpp::NumericMatrix &amp; A, Rcpp::NumericVector &amp; x)</span> </span>{
    
    <span class=hljs-keyword >int</span> nrow = A.nrow(), ncol = A.ncol();
    
    <span class=hljs-function >arma::mat <span class=hljs-title >X</span><span class=hljs-params >(A.<span class=hljs-built_in >begin</span>(), nrow, ncol, <span class=hljs-literal >false</span>)</span></span>;
    <span class=hljs-function >arma::colvec <span class=hljs-title >y</span><span class=hljs-params >(x.<span class=hljs-built_in >begin</span>(), nrow, <span class=hljs-literal >false</span>)</span></span>;
    
    <span class=hljs-keyword >for</span>(<span class=hljs-keyword >int</span> iter=<span class=hljs-number >0</span>; iter&lt;<span class=hljs-number >1000</span>; ++iter) {
      y = X * y;
    }
    
    
    <span class=hljs-keyword >return</span> x;
  }</code></pre> <pre><code class="R hljs">n &lt;- <span class=hljs-number >1000</span>
A &lt;- matrix(c(<span class=hljs-number >1</span>:(n*n)),nrow=n,ncol=n)
x &lt;- rep(<span class=hljs-number >1</span>,n)
t0 &lt;- Sys.time()
x = matvec(A, x)
t1 &lt;- Sys.time()
print(t1-t0)</code></pre> Time difference of 0.19031 secs <div class=page-foot > <div class=copyright > &copy; Pierre Navaro. Last modified: February 17, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>. </div> </div> </div>